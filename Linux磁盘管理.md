# Linux磁盘管理  
---
## 1. Linux分区  
+ 原理介绍  
  >1. 对于Linux来说，无论有几个分区，分给了哪一个目录使用，它归根结底就只有一个根目录————一个独立且唯一的文件结构，Linux中每个分区都是用来组成整个文件系统的一部分  
  >2. Linux采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来，这是要在如的一个分区将使它的存储空间在一个目录下获得
+ 硬盘说明
  >1. Linux硬盘分**IDE硬盘**和**SCSI硬盘**，目前基本上是SCSI硬盘
  >2. 对于IDE硬盘，驱动器标识符为**hdx\~**，其中“hd”表明分区所在的设备类型，这里是指IDE硬盘，“x”为盘号（a为基本盘，b为基本从属盘，c为辅助主盘，d为辅助从属盘），“~”代表分区。前四个分区用数字1到4表示，他们是主分区或扩展分区，从5开始就是逻辑分区。例：hda3表示为第一个IDE硬盘上的第三个主分区或扩展分区，hdb2表示第二个IDE硬盘上的第二个主分区或扩展分区  
  >3. 对于SCSI硬盘则标识为**sdx~**，SCSI硬盘使用“sd”来表示分区所在设备的类型，其余和IDE硬盘的标识方法一致
+ 查看所有分区挂载情况
  >`lsblk`命令或`lsblk -f`命令  
---
## 2. Linux硬盘挂载案例
+ 说明
  >下面，以增加一块硬盘为例来熟悉磁盘的相关指令和深入理解磁盘分区、挂载、卸载的概念
+ 如何增加一块硬盘
  >1. 虚拟机添加硬盘  
  在虚拟机菜单中选择“设置”，设备列表中添加硬盘，在选择磁盘大小时修改，完成后续步骤后**重新启动**
  >2. 分区  
  输入`fdisk /dev/sdb`分区命令开始进行分区  
  *m*：显示命令列表  
  *p*：显示磁盘分区（同`fdisk -l`）  
  *n*：新增分区  
  *d*：删除分区  
  *w*：写入并退出  
  说明：开始分区后输入*n*新增分区，然后选择*p*分区类型为主分区。两次回车默认剩余全部空间，最后输入*w*写入分区并退出，如果不保存输入*q*退出
  >3. 格式化  
  格式化磁盘命令`mkfs -f ext4 /dev/sdb1`，其中ext4是分区类型
  >4. 挂载  
  挂载命令`mount /dev/sdb1 目标目录`  
  卸载命令`umount /dev/sdb1`或`umount 目标目录`  
  注意：用命令行挂在重启后会失效  
  >5. 设置可以自动挂载  
  永久挂载：通过修改 */etc/fstab* 文件实现挂载，添加完成后须立即执行使用`mount -a`命令
---
## 3. 磁盘管理
+ 磁盘情况查询
  + 查询系统整体的磁盘使用情况
    + 基本语法  
    >`df -h`
  + 查询指定目录的磁盘占有情况
    + 基本语法
    >`du -h /目录`&emsp;查询指定目录的磁盘占用情况，默认为当前目录
    + 常用选项  
    >*-s*：指定目录所占用大小汇总  
    *-h*：带计量单位  
    *-a*：含文件  
    *--max-depth=1*：子目录深度  
    *-c*：列出明细的同时，增加汇总值