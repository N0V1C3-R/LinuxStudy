# Linux任务调度
---
## 1. **crond**任务调度  
+ 基本概述  
  >任务调度是指系统在某个时间执行的特定的命令或程序  
+ 基本分类  
  >+ 1. 系统工作：有些重要的工作必须周而复始地进行，如病毒扫描等
  >+ 2. 个别用户工作：个别用户可能希望执行某些程序，如对MySQL数据库进行备份  
+ 基本语法  
  >`crontab [选项]`  
  `service crond restart`&emsp;重启任务调度
+ 常用选项  
  >*-e*：编辑crontab定时任务  
  *-l*：查询crontab任务  
  *-r*：删除当前用户所有的crontab任务
+ 快速入门  
  >`/etc/crontab`设置任务调度文件  
  `crontab -e`设置个人任务调度  
  `*/1 * * * * ls -l /etc/ > /tmp/to.txt`输入命令到调度文件（该指令意思是每小时的每分钟执行`ls -l /etc/ > /tmp/to.txt`命令  
  >+ 参数细节说明  
  >   + 五个占位符的说明  
  > &emsp;第一个 __*__ &emsp;&emsp;一小时当中的第几分钟&emsp;&emsp;0-59  
  &emsp;第二个 __*__ &emsp;&emsp;一天当中的第几个小时&emsp;&emsp;0-23  
  &emsp;第三个 __*__ &emsp;&emsp;一个月份当中的第几天&emsp;&emsp;1-31  
  &emsp;第四个 __*__ &emsp;&emsp;一年度当中的第几个月&emsp;&emsp;1-12  
  &emsp;第五个 __*__ &emsp;&emsp;一个星期当中的星期几&emsp;&emsp;0-7（0和7都代表星期日）  
  >   + 特殊符号的说明  
  >&emsp; __*__ &emsp;&emsp;代表任何时间。比如第一个“\*”就代表一小时的每一分钟都执行一次  
  &emsp; __,__ &emsp;&emsp;代表不联系的时间。比如“0 8,12,16 * * * 命令”就代表在每天的8:00、12:00、16:00都执行一次命令  
  &emsp; __-__ &emsp;&emsp;代表连续的时间范围。比如“0 5 * * 1-6 命令”代表周一到周六的5:00执行命令  
  &emsp; __*/n__ &emsp;&emsp;代表每隔多久执行一次。比如“*/10 * * * * 命令”代表每隔10分钟执行一次命令
  >   + 特定时间执行任务案例  
  >&emsp;`45 22 * * * 命令`&emsp;&emsp;在22:45执行命令  
  &emsp;`0 17 * * 1 命令`&emsp;&emsp;每周一的17:00执行命令  
  &emsp;`0 5 1,15 * * 命令`&emsp;&emsp;每月1号和15号的5:00执行命令  
  &emsp;`40 4 * * 1-5 命令`&emsp;&emsp;每周一到周五的4:40执行命令  
  &emsp;`*/10 4 * * * 命令`&emsp;&emsp;每天4:00每隔10分钟执行一次命令  
  &emsp;`0 0 1,15 * 1 命令`&emsp;&emsp;每月1号和15号，每周1的0:00执行命令（**注意**：星期和日期最好不要同时出现，因为它们定义的都是天，容易混淆管理员）
---
## 2. **at**定时任务
+ 基本介绍
  >1. at命令是一次性定时计划任务，at的守护进程**atd**会以后台模式运行，检查作业队列来运行  
  >2. 默认情况下，atd守护进程每60秒检查作业队列，有作业时会检查作业运行时间，如果时间与当前时间匹配，则运行此作业  
  >3. at命令是一次性定时计划任务，执行完一个程序后不再执行此任务了  
  >4. 在使用at命令的时候，一定要保证atd进程的启动，可以使用相关指令来查看（`ps -ef | grep atd`可以检测atd进程是否运行）
+ 基本语法  
  >`at [选项] [时间]`（输入`Crtl` + `d`结束at命令输入）
+ 常用选项  
  >*-m*：当指定的任务被完成以后将给用户发送邮件，即使没有标准输出  
  *-I*：atq的别名  
  *-d*：atrm的别名  
  *-v*：显示任务将被执行的时间  
  *-c*：打印任务的内容到标准输出  
  *-V*：显示版本信息  
  *-q <队列>*：使用指定的队列  
  *-f <文件>*：从指定文件读入任务而不是从标准输入读入  
  *-t <时间参数>*：以时间参数的形式提交要运行的任务
+ at的时间定义  
  >1. 接受在当天的*hh:mm*（小时:分钟）式的时间指定，加入该事件已过去，那么在第二天执行。如：04:00  
  >2. 使用*midnight*（深夜）、*noon*（中午），*teatime*（下午茶时间，一般是下午四点）等比较模糊的词语来指定时间  
  >3. 采用12小时计时制，即在时间后面加上*AM*（上午）或*PM*（下午）来说明是上午还是下午。如12pm  
  >4. 指定命令执行的具体日期，指定格式为*month day*（月 日）或*mm/dd/yy*（月/日/年）或*dd.mm.yy*（日.月.年），指定的日期必须跟在指定的时间后面。如：04:00 2021-03-1  
  >5. 使用相对计时法。指定格式为*now + count time-units*（now当前时间；time-units是时间单位，这里能够是分钟、小时、天、星期；count是时间的数量）。如：now + 5 minutes  
  >6. 直接使用*today*（今天）、*tomorrow*（明天）来指定完成命令的时间